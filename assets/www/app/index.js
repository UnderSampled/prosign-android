"use strict";!function(){function e(){document.addEventListener("pause",t.bind(this)),document.addEventListener("resume",n.bind(this))}function t(){}function n(){}function o(e){var t=new AudioContext,n=t.createOscillator();n.frequency.value=e;var o=t.createGain();return o.gain.value=0,n.connect(o),o.connect(t.destination),n.start(),function(e){o.gain.value=e?1:0}}function a(e){var t=new WebSocket(e);return t.onopen=function(){t.send("KM4DVF")},t.onmessage=function(e){var t=e.data;console.log(t)},function(e){t.send(e)}}function i(e){function t(e){if(e!==m){m=e;var t=performance.now(),o=t-h[h.length-1][0];e?a.classList.add("hot"):a.classList.remove("hot"),navigator.vibrate(e?1e4:0),l(e),h.push([t,e]),e?clearTimeout(n):(o>=3*g?f[f.length-1]+="-":f[f.length-1]+=".",n=setTimeout(function(){d[f[f.length-1]]&&(v+=d[f[f.length-1]],s.textContent=c(v)),f.push(""),n=setTimeout(function(){v+=" ",f.push(""),n=setTimeout(function(){f=[""],v="",r.textContent=" ",s.textContent=" "},3e3)},4*g)},3*g),r.textContent=f.join(" "))}}var n,a=e.getElementsByClassName("keyer")[0],i=e.getElementsByClassName("plot")[0],r=e.getElementsByClassName("code")[0],s=e.getElementsByClassName("text")[0],l=o(750),h=[[performance.now(),!1]],f=[""],v="",m=!1,g=1200/19;return window.requestAnimationFrame(function(e){u(e,i,h)}),t}function r(e,t,n){var o,a,i=0,r=[],s=1200/n;for(o=0,a=t.length;a>o;o++){switch(t[o]){case".":r.push(i),i+=s,r.push(i);break;case"-":r.push(i),i+=3*s,r.push(i);break;case" ":i+=s," "===t[o-1]&&(i+=5*s)}i+=s}var c=!1;for(o=0,a=r.length;a>o;o++)c=!c,setTimeout(function(t){e(t)},r[o],c)}function s(e){for(var t=[],n=e.toUpperCase(),o=0,a=e.length;a>o;o++)t.push(l[n[o]]);return t.join(" ")}function c(e){return e[0]+e.slice(1).toLowerCase()}function u(e,t,n){var o=t.getContext("2d");o.clearRect(0,0,o.canvas.width,o.canvas.height),o.lineWidth=o.canvas.height,o.strokeStyle="#555";for(var a=!1,i=0,r=n.length;r>i;i++){var s=Math.floor(o.canvas.width-(e-n[i][0])/10);a!==n[i][1]&&(a=n[i][1],a?(o.beginPath(),o.moveTo(s,o.lineWidth/2)):(o.lineTo(s,o.lineWidth/2),o.stroke()))}n[n.length-1][1]&&(o.lineTo(o.canvas.width,o.lineWidth/2),o.stroke()),window.requestAnimationFrame(function(e){u(e,t,n)})}var l={A:".-",B:"-...",C:"-.-.",D:"-..",E:".",F:"..-.",G:"--.",H:"....",I:"..",J:".---",K:"-.-",L:".-..",M:"--",N:"-.",O:"---",P:".--.",Q:"--.-",R:".-.",S:"...",T:"-",U:"..-",V:"...-",W:".--",X:"-..-",Y:"-.--",Z:"--..",".":".-.-.-",",":"--..--"," ":""},d={},h=!0,f=!1,v=void 0;try{for(var m,g=Object.keys(l)[Symbol.iterator]();!(h=(m=g.next()).done);h=!0){var y=m.value;d[l[y]]=y}}catch(p){f=!0,v=p}finally{try{!h&&g["return"]&&g["return"]()}finally{if(f)throw v}}document.addEventListener("deviceready",e.bind(this));var w=document.getElementById("tx"),C=i(w),E=w.getElementsByClassName("keyer")[0];E.addEventListener("touchstart",function(){C(!0)}),E.addEventListener("touchend",function(){C(!1)});var b=document.getElementById("rx"),k=i(b),x=b.getElementsByClassName("keyer")[0];x.addEventListener("touchend",function(){r(k,s("This is a test."),18)}),a("ws://localhost:8080/morse")}();
//# sourceMappingURL=maps/index.js.map
